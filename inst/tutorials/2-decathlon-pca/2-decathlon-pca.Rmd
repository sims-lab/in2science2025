---
title: "Analyse Decathlon data using PCA"
output: learnr::tutorial
runtime: shiny_prerendered
description: >
  This tutorial analyses performance data during the 2004 Olympic Game.
---

```{r setup, include=FALSE}
library(learnr)
library(tidyverse)
library(FactoMineR)
library(Rfast)
library(factoextra)
knitr::opts_chunk$set(echo = FALSE)
```

## Welcome

This tutorial will use data from athlete performance during the 2004 Olympic Game can be analysed to extract information that might not be obvious at first glance.

This tutorial uses a programming language called _R_ which was developed for statistical analyses.
It is widely used in a range of domains, from banking to biomedical data analyses.

In this tutorial, each screen will present you with some information, and code chunks for entering code to complete the exercises.

## Loading the data

### Exercise

The dataset that we will analyse is provided by a package called [FactoMineR](https://cran.r-project.org/package=FactoMineR),
in an object called `decathlon`.

To load the dataset, type `data(decathlon)` in the code chunk below,
then click the 'Run code' button on the right.

```{r data-decathlon, exercise=TRUE}

```

At first glance, nothing seems to have happened.
However, as promised, the code above *loaded* the dataset in your _R_ session,
which means that it is now available for use.

Whatever dataset you work with, your first move is usually to have a look at it,
to get familiar with its contents.

In _R_, typing the name of an object displays the value of that object.

Since the object is called `decathlon`, type `decathlon` in the code chunk below,
then click the 'Run code' button on the right.

```{r decathlon, exercise=TRUE}

```

Take a moment to think about what you are seeing above:

- Can you describe in your own words what this dataset it showing? 
- What do the rows represent?
- What do the columns represent?
- What type of data is present in each column (is it numbers, text, other?)

When you're ready, move on to the next section where we describe the dataset in our own words.

## The decathlon dataset

This dataset contains the results of decathlon events during two athletic meetings which took place one month apart in 2004: the Olympic Games in Athens (23 and 24 August), and the Decastar 2004 (25 and 26 September).

For both competitions, the following information is available for each athlete:

- performance for each of the 10 events   
- total number of points (for each event, an athlete earns points based on performance; this is the sum of points scored) 
- final ranking

Each athlete is represented by a row in the table.

Each column represents one of the events, except for the last three columns which represent the overall rank, points, and the competition.

## Working with data frames in _R_

In _R_, a dataset shaped like a table (with rows and columns) is called a dataframe.

One of the most common things you will do when working with dataframes is accessing specific columns of data, either to analyse them, or the visualise them.

To access a specific column of the table, you type the name of the table, followed by the "dollar" sign `$` and the name of the column that you want to access.
For instance, you can get the values in the second column called `Long.jump` by typing `decathlon$Long.jump`.
Try it below!

```{r decathlon-long-jump, exercise=TRUE}

```

Notice how the code above only displays the values in that column,
without the name of the column or the names of the athletes those numbers correspond to.

Also, take note that things get a bit more complicated if the name of the column starts with a digit,
for instance the first column called `100m`.
In that case, you need to add "backticks" around the name of the column, like so:

```{r decathlon-100m, exercise=TRUE}
decathlon$`100m`
```

Thankfully, the RStudio program that we are using to run this tutorial makes coding easier.
As soon as you type the name of a dataframe followed by the dollar sign,
it opens a dropdown menu with the list of column names available,
and autocompletes the correct code for whatever column name you select.

Try it below for the column named `400m`!

```{r decathlon-400m, exercise=TRUE}

```

## Visualising data

Now that you know how to access values in specific columns,
you're only one step away from making graphs (also called "plots") that can help you visualise those values.

There are a number of simple plotting functions available in _R_ that can get you started quickly.
We'll stick with those in this tutorial to keep the code simple,
but there are more complicated functions that can produce much prettier versions of the same graphics.

For instance, the `plot()` function can be given a set of values between the parentheses,
and displays them in order, at a height that corresponds to each value.

You can try it by typing `plot(decathlon$Javeline)` in the code chunk below.

```{r plot-javelin, exercise=TRUE, fig.height=7, fig.width=9}

```

This is a bit hard to read,
let's use the `sort()` function to rearrange the values in increasing order before plotting them.

Here, we give you the code.
Can you describe how it differs from the code above?

```{r plot-sort-javelin, exercise=TRUE, fig.height=7, fig.width=9}
plot(sort(decathlon$Javeline))
```

Another plotting function is `hist()` which takes a set of values between the parentheses,
and displays a histogram that shows you how many values it counted in a series of "bins" of equal sizes
going from the smallest to the highest value observed.
You can try it by typing `hist(decathlon$Javeline)` in the code chunk below:

```{r hist-javelin, exercise=TRUE, fig.height=7, fig.width=9}

```

Take a moment to think about what those graphs represent,
what they are telling you about the data.

When you are ready, continue reading below.

- The first and second graphs show us the distance each competitor threw the javelin.
- The last graph shows the number of competitors who threw the javelin in groups of 5 metres.

### Asking questions

Visualisation can be used to explore the data and investigate hypotheses you may have.

For instance, the `plot()` function can also be give two sets of values,
in which case it will draw a "scatterplot" that uses those two values as the coordinates to place each point.
For this to work, the two sets must have the same number of values.
Also, the two sets of values must be separated by a comma `,` within the parentheses of the function.

This is all a bit complicated to describe, so here we give you the code
and you only need to click the 'Run code' button.

```{r hist-javelin, exercise=TRUE, fig.height=7, fig.width=9}
plot(decathlon$`100m`, decathlon$Long.jump)
```

Take a moment to understand what the plot is showing.
What does each point represent?
Can you see any meaningful trend?
If so, how would you describe it?

- Each point represents an athlete.
- The position of each point along the horizontal axis shows the time (in seconds) it took them to run 100 meters.
- The position of each point along the vertical axis shows the distance the same athletes could jump in length (in - meters).

It seems that the fastest an athlete can run, the furthest they can jump.
Of course, this is not surprising, but here we have data to prove it!

## Exercise with Code

*Here's an exercise with some prepopulated code as well as `exercise.lines = 5` to provide a bit more initial room to work.*

Now write a function that adds any two numbers and then call it:

```{r add-function, exercise=TRUE, exercise.lines = 5}
add <- function() {
  
}
```

## Topic 2

### Exercise with Hint

*Here's an exercise where the chunk is pre-evaluated via the `exercise.eval` option (so the user can see the default output we'd like them to customize). We also add a "hint" to the correct solution via the chunk immediate below labeled `print-limit-hint`.*

Modify the following code to limit the number of rows printed to 5:

```{r print-limit, exercise=TRUE, exercise.eval=TRUE}
mtcars
```

```{r print-limit-hint}
head(mtcars)
```

### Quiz

*You can include any number of single or multiple choice questions as a quiz. Use the `question` function to define a question and the `quiz` function for grouping multiple questions together.*

Some questions to verify that you understand the purposes of various base and recommended R packages:

```{r quiz}
quiz(
  question("Which package contains functions for installing other R packages?",
    answer("base"),
    answer("tools"),
    answer("utils", correct = TRUE),
    answer("codetools")
  ),
  question("Which of the R packages listed below are used to create plots?",
    answer("lattice", correct = TRUE),
    answer("tools"),
    answer("stats"),
    answer("grid", correct = TRUE)
  )
)
```

